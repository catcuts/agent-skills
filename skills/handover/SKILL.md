---
name: handover
description: 跨会话工作交接工具。支持"归档当前进度"和"恢复历史进度"两个模式。使用场景：需要在新会话中恢复之前的工作、需要在多个设备间同步工作上下文、需要保存当前工作状态以便稍后继续。
allowed-tools: Read, Write, Bash
---

# Handover Skill

## 任务指令

当你被调用时，请判断用户的意图：是"交接出去"还是"接手回来"。

## 模式 1：导出 (Export)

如果用户说"交接"或类似含义（例如"交接。要求如下：..."）：

1. **深度汇总**：分析当前会话，提取任务目标、已改代码、待办事项和核心逻辑，并形成一行简短的工作简述。

2. **创建目录**：在 `.handover/` 下创建一个以第1步形成的"工作简述"命名的文件夹。

3. **写入存档**：使用 `Write` 工具在第2步中创建的文件夹中生成 `HANDOVER.md`。

4. **结束引导**：**必须**用在醒目的位置用醒目的样式在末尾输出以下文字：

    ```
    ✨ 存档已就绪 ✅

    现在你可以（二选一）：
    1) 直接手动执行 `/clear` 释放内存，在新会话中对我说明 `接手当前工作` 或类似的提示即可恢复。
    2) 直接手动修改存档，或者通过与我对话的方式修改存档，直到满意为止，然后再执行 1) 操作。
    ```

## 模式 2：恢复 (Resume)

如果用户输入"交接：接手"或类似含义（例如"交接：接手 xx 工作"）：

1. **列出存档**：使用 `Bash` 工具执行 `ls -d .handover/*/` 列出所有已归档的工作目录。

2. **交互选择**：
    - 如果有多个存档，以数字列表形式展示（例如：`1. 优化登录逻辑`, `2. 修复样式Bug`）。
    - 如果用户有明确指出要接手的工作，在列表中用"🚩"标注最有可能要接手的存档。
    - 询问用户："请选择要接手的序号：已用 🚩 标记您最有可能要接手的存档。"
    - 暂停等待用户选择后再继续。

3. **读取并初始化**：
    - 得到序号后，使用 `Read` 工具读取对应目录下的 `HANDOVER.md`。
    - 告诉用户："✨ 读取成功。我已定位到存档的状态，现在我们可以在该存档的基础上继续工作。"

## 附加信息

存档文件保存在项目根目录的 `.handover/` 中，该目录已在 .gitignore 中排除。
